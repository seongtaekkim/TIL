# 02. compute in the cloud



- 기본적인 Amazon EC2의 이점을 설명할 수 있습니다.
- 서로 다른 Amazon EC2 인스턴스 유형을 파악할 수 있습니다.
- Amazon EC2의 다양한 결제 옵션을 구분할 수 있습니다.
- Amazon EC2 Auto Scaling의 이점을 요약할 수 있습니다.
- Elastic Load Balancing의 이점을 요약할 수 있습니다.
- Elastic Load Balancing 사용 사례를 제시할 수 있습니다.
- Amazon Simple Notification Service(Amazon SNS)와 Amazon Simple Queue Service(Amazon SQS)의 차이점을 요약할 수 있습니다.
- 그 외 AWS 컴퓨팅 옵션을 요약할 수 있습니다.





## Amazon Elastic Compute Cloud(Amazon EC2)

[Amazon Elastic Compute Cloud(Amazon EC2)](https://aws.amazon.com/ec2/)는 안전하고 크기 조정이 가능한 컴퓨팅 용량을 Amazon EC2 인스턴스로 클라우드에서 제공합니다. 

여러분이 회사의 리소스 아키텍처를 책임지고 새로운 웹 사이트를 지원해야 한다고 가정해 보겠습니다. 온프레미스 리소스를 사용할 경우

- 미리 하드웨어를 구매해야 합니다.
- 서버가 배달될 때까지 기다려야 합니다.
- 물리적 데이터 센터에 서버를 설치해야 합니다.
- 필요한 모든 구성을 수행해야 합니다.

이에 비해 Amazon EC2 인스턴스를 사용할 경우 AWS 클라우드에서 가상 서버를 사용하여 애플리케이션을 실행할 수 있습니다.

- 몇 분이면 Amazon EC2 인스턴스를 프로비저닝하고 시작할 수 있습니다.
- 워크로드 실행을 완료했다면 인스턴스 사용을 중지할 수 있습니다.
- 인스턴스가 실행 중일 때 사용한 컴퓨팅 시간에 대해서만 비용을 지불하고 인스턴스가 중지 또는 종료된 상태에서는 비용을 지불하지 않습니다.
- 필요한 서버 용량에 대해서만 비용을 지불하므로 비용을 절감할 수 있습니다.





## **Amazon EC2 인스턴스 유형**

[Amazon EC2 인스턴스 유형](https://aws.amazon.com/ec2/instance-types/)은 다양한 작업에 최적화되어 있습니다. 인스턴스 유형을 선택할 때는 워크로드 및 애플리케이션의 구체적 요구 사항을 고려합니다. 여기에는 컴퓨팅, 메모리 또는 스토리지 기능에 대한 요구 사항이 포함될 수 있습니다.





### 1. 범용 인스턴스

**범용 인스턴스**는 컴퓨팅, 메모리, 네트워킹 리소스를 균형 있게 제공합니다. 

- 애플리케이션 서버
- 게임 서버
- 엔터프라이즈 애플리케이션용 백엔드 서버
- 중소 규모 데이터베이스

컴퓨팅, 메모리, 네트워킹에 필요한 리소스가 거의 동일한 애플리케이션이 있다고 가정해 보겠습니다. 애플리케이션에 어느 한 리소스 영역에 대한 최적화가 필요하지 않기 때문에 범용 인스턴스에서 애플리케이션을 실행하는 것이 좋습니다.

### 2. 컴퓨팅 최적화 인스턴스

**컴퓨팅 최적화 인스턴스**는 고성능 프로세서를 활용하는 컴퓨팅 집약적인 애플리케이션에 적합합니다. 범용 인스턴스와 마찬가지로 컴퓨팅 최적화 인스턴스는 웹 서버, 애플리케이션 서버, 게임 서버와 같은 워크로드에 사용할 수 있습니다.

하지만 컴퓨팅 최적화 애플리케이션은 고성능 웹 서버, 컴퓨팅 집약적 애플리케이션 서버 및 게임 전용 서버에 적합하다는 점이 다릅니다. 또한 컴퓨팅 최적화 인스턴스를 단일 그룹에서 많은 트랜잭션을 처리해야 하는 일괄 처리 워크로드에 사용할 수도 있습니다.

### 3. 메모리 최적화 인스턴스

**메모리 최적화 인스턴스**는 메모리에서 대규모 데이터 세트를 처리하는 워크로드를 위한 빠른 성능을 제공하기 위해 설계되었습니다. 컴퓨팅에서 메모리는 임시 스토리지 영역입니다. 여기에는 중앙 처리 장치(CPU)가 작업을 완료하는 데 필요한 모든 데이터와 명령이 들어 있습니다. 컴퓨터 프로그램이나 애플리케이션은 스토리지에서 메모리로 로드된 후 실행됩니다. 이 사전 로드 프로세스 덕분에 CPU가 컴퓨터 프로그램에 직접 액세스할 수 있습니다.



애플리케이션을 실행하기 전에 많은 데이터를 미리 로드해야 하는 워크로드가 있다고 가정해 보겠습니다. 고성능 데이터베이스일 수도 있고 방대한 양의 비정형 데이터의 실시간 처리가 필요한 워크로드일 수도 있습니다. 이러한 유형의 사용 사례에서는 메모리 최적화 인스턴스 사용을 고려합니다. 메모리 최적화 인스턴스를 사용하면 많은 메모리가 필요한 워크로드를 실행하고 뛰어난 성능을 얻을 수 있습니다.

### 4. 액셀러레이티드 컴퓨팅 인스턴스

**액셀러레이티드 컴퓨팅 인스턴스**는 하드웨어 액셀러레이터 또는 코프로세서를 사용하여 일부 기능을 CPU에서 실행되는 소프트웨어에서보다 더 효율적으로 수행합니다. 이러한 기능의 예로는 부동 소수점 수 계산, 그래픽 처리, 데이터 패턴 일치 등이 있습니다.



컴퓨팅에서 하드웨어 액셀러레이터는 데이터 처리를 가속화할 수 있는 구성 요소입니다. 액셀러레이티드 컴퓨팅 인스턴스는 그래픽 애플리케이션, 게임 스트리밍, 애플리케이션 스트리밍과 같은 워크로드에 적합합니다.

### 5. 스토리지 최적화 인스턴스

**스토리지 최적화 인스턴스**는 로컬 스토리지의 대규모 데이터 세트에 대한 순차적 읽기 및 쓰기 액세스가 많이 필요한 워크로드를 위해 설계되었습니다. 스토리지 최적화 인스턴스에 적합한 워크로드의 예로는 분산 파일 시스템, 데이터 웨어하우징 애플리케이션, 고빈도 온라인 트랜잭션 처리(OLTP) 시스템 등이 있습니다.



컴퓨팅에서 IOPS(초당 입출력 작업 수)라는 용어는 스토리지 디바이스의 성능을 측정하는 지표입니다. IOPS는 디바이스가 1초 내에 수행할 수 있는 입력 또는 출력 작업의 수를 나타냅니다. 스토리지 최적화 인스턴스는 지연 시간이 짧은 임의 IOPS를 애플리케이션에 제공하도록 설계되었습니다. 



입력 작업은 데이터베이스에 입력되는 레코드와 같이 시스템에 투입되는 데이터라고 생각할 수 있습니다. 출력 작업은 서버에서 생성된 데이터입니다. 출력의 예로는 데이터베이스의 레코드에 대해 수행되는 분석을 들 수 있습니다. IOPS 요구 사항이 높은 애플리케이션이 있는 경우 스토리지 최적화 인스턴스는 이러한 종류의 사용 사례에 최적화되지 않은 다른 인스턴스 유형보다 나은 성능을 제공할 수 있습니다.







## **Amazon EC2 요금**

Amazon EC2에서는 사용한 컴퓨팅 시간에 대해서만 비용을 지불합니다. Amazon EC2는 사용 사례에 따라 다양한 요금 옵션을 제공합니다. 예를 들어 사용 사례가 중단을 견딜 수 있는 경우 스팟 인스턴스로 비용을 절감할 수 있습니다. 또한 예약 인스턴스로 사전 약정을 하고 최소 사용 수준을 고정하여 비용을 절약할 수도 있습니다.



### 온디맨드

### Amazon EC2 Savings Plans

### 예약 인스턴스

### 스팟 인스턴스

### 전용 호스트



# Amazon EC2 확장



## 확장성

**확장성**을 위해서는 필요한 리소스만으로 시작하고 확장 및 축소를 통해 수요 변화에 자동으로 대응하도록 아키텍처를 설계해야 합니다. 그 결과, 사용한 리소스에 대해서만 비용을 지불합니다. 컴퓨팅 용량 부족 때문에 고객의 요구 사항을 충족할 수 없을지 걱정할 필요가 없습니다.

이 조정 프로세스가 자동으로 수행되도록 하려면 어떤 AWS 서비스를 사용해야 할까요? Amazon EC2 인스턴스에 이 기능을 제공하는 AWS 서비스가 **Amazon EC2 Auto Scaling**입니다.

## **Amazon EC2 Auto Scaling**

잘 로드되지 않고 빈번히 시간 초과되는 웹 사이트에 액세스하려고 한 적이 있다면 이 웹 사이트가 처리할 수 있는 것보다 많은 요청을 수신한 것일 수 있습니다. 이는 커피숍에 고객의 주문을 처리할 바리스타가 한 명밖에 없을 때 길게 줄을 서서 기다리는 상황과 비슷합니다.





# Elastic Load Balancing

**Elastic Load Balancing**은 들어오는 애플리케이션 트래픽을 Amazon EC2 인스턴스와 같은 여러 리소스에 자동으로 분산하는 AWS 서비스이다.

Elastic Load Balancing과 Amazon EC2 Auto Scaling은 별도의 서비스이지만 서로 연동하여 Amazon EC2에서 실행되는 애플리케이션이 뛰어난 성능과 가용성을 제공한다.





# 메시징 및 대기열



### **Amazon Simple Notification Service(Amazon SNS)**

**Amazon Simple Notification Service(Amazon SNS)**는 게시/구독 서비스입니다. 게시자는 Amazon SNS 주제를 사용하여 구독자에게 메시지를 게시합니다. 이는 커피숍에서 계산원이 음료를 만드는 바리스타에게 주문 사항을 전달하는 것과 비슷합니다.

Amazon SNS에서 구독자는 웹 서버, 이메일 주소, AWS Lambda 함수 또는 그 밖의 여러 옵션이 될 수 있습니다. 



## **Amazon Simple Queue Service(Amazon SQS)**

**Amazon Simple Queue Service(Amazon SQS)**는 메시지 대기열 서비스입니다. 

Amazon SQS를 사용하면 메시지 손실이나 다른 서비스 사용 없이 소프트웨어 구성 요소 간에 메시지를 전송, 저장, 수신할 수 있습니다. Amazon SQS에서는 애플리케이션이 메시지를 대기열로 전송합니다. 사용자 또는 서비스는 대기열에서 메시지를 검색하여 처리한 후 대기열에서 삭제합니다.





# 추가 컴퓨팅 서비스



### **1. 서버리스 컴퓨팅**

이 모듈 앞부분에서 클라우드에서 가상 서버를 실행할 수 있는 서비스인 Amazon EC2를 살펴보았습니다. Amazon EC2에서 실행하려는 애플리케이션이 있는 경우 다음과 같이 해야 합니다.

- 인스턴스(가상 서버)를 프로비저닝합니다.
- 사용자 코드를 업로드합니다.
- 애플리케이션이 실행되는 동안 계속해서 인스턴스를 관리합니다.



#### **AWS Lambda**

[**AWS Lambda**](https://aws.amazon.com/lambda)는 서버를 프로비저닝하거나 관리할 필요 없이 코드를 실행할 수 있는 서비스입니다. 

AWS Lambda를 사용하는 경우 사용한 컴퓨팅 시간에 대해서만 비용을 지불합니다. 코드를 실행하는 동안에만 요금이 부과됩니다. 사실상 모든 유형의 애플리케이션 또는 백엔드 서비스 코드를 실행할 수 있으며 이를 관리할 필요는 전혀 없습니다. 

예를 들어 간단한 Lambda 함수로 업로드되는 이미지의 크기를 AWS 클라우드에 맞춰 자동으로 조정하는 함수가 있을 수 있습니다. 이 경우 새 이미지를 업로드할 때 함수가 트리거됩니다. 



### 2. Container

#### **Amazon Elastic Container Service(Amazon ECS)**

[**Amazon Elastic Container Service(ECS)**](https://aws.amazon.com/ecs/)는 AWS에서 컨테이너식 애플리케이션을 실행하고 확장할 수 있는 확장성이 뛰어난 고성능 컨테이너 관리 시스템입니다. 



#### **Amazon Elastic Kubernetes Service(Amazon EKS)**

[**Amazon Elastic Kubernetes Service(Amazon EKS)**](https://aws.amazon.com/eks/)는 AWS에서 Kubernetes를 실행하는 데 사용할 수 있는 완전 관리형 서비스입니다. 



#### **AWS Fargate**

[**AWS Fargate**](https://aws.amazon.com/fargate/)는 컨테이너용 서버리스 컴퓨팅 엔진으로, Amazon ECS와 Amazon EKS에서 작동합니다. 

AWS Fargate를 사용하는 경우 서버를 프로비저닝하거나 관리할 필요가 없습니다.
