# 02. compute in the cloud



- Amazon EC2
- 서로 다른 Amazon EC2 인스턴스 유형
- Amazon EC2의 다양한 결제 옵션
- Amazon EC2 Auto Scaling의 이점
- Elastic Load Balancing의 이점
- Elastic Load Balancing 사용 사례
- Amazon Simple Notification Service(Amazon SNS)와 Amazon Simple Queue Service(Amazon SQS)의 차이점
- 그 외 AWS 컴퓨팅 옵션을 요약



## 1. Amazon Elastic Compute Cloud(Amazon EC2)

커피숍에 다양한 직원이 있듯 AWS에는 가동하여 AWS 환경에 배포할 수 있는 다양한 유형의 EC2 인스턴스가 있다. 각 인스턴스 유형은 특정 유형의 작업에 최적화됨. 

1. Amazon Elastic Compute Cloud
2. 가상 서버에 액세스 하는데 사용하는 서버
3. AWS가 이미 서버를 구입하여 제반 작업을 마쳤고 이 서버는 바로 사용할 수 있는 상태
4. 가상화 기술을 사용하여 AWS에서 관리하는 물리적 호스트 시스템에서 실행됨.
5. EC2 인스턴스는 그 호스트에 있는 다른 EC2 인스턴스 인식 X -> 안전하면서 서로 분리되어 있음.
6. 인스턴스의 수직 확장 (유연한 크기 조정 가능)

 



## 2. Amazon EC2 인스턴스 유형

다양한 작업에 최적화되어 있다. 
인스턴스 유형을 선택할 때는 워크로드 및 애플리케이션의 구체적 요구 사항을 고려한다. 
여기에는 컴퓨팅, 메모리 또는 스토리지 기능에 대한 요구 사항이 포함될 수 있다.

- 범용 인스턴스
  - 컴퓨팅, 메모리, 네트워킹 리소스를 균형 있게 제공
- 컴퓨팅 최적화 인스턴스
  - 고성능 우베서버, 서버 및 게임에 적합
- 메모리 최적화 인스턴스
  - 메모리에서 대규모 데이터 세트를 처리하는 워크로드를 위한 빠른 성능 제공
- 액셀러레이티드 컴퓨팅 인스턴스
  - 데이터 처리를 가속화할 수 있는 구성 요소
  ex) 그래픽처리, 부동 소수점 수 계산, 데이터 패턴 일치
- 스토리지 최적화 인스턴스
  - 순차적 읽기 및 쓰기 액세스가 많이 필요한 워크로드를 위해 설계됨.
  - 분산파일 시스템, 데이터 웨어하우징 애플리케이션에 적합.

 

## 3. Amazon EC2 요금

### **온디맨드 인스턴스** 

- 중단할 수 없는 불규칙한 단기 워크로드가 있는 애플리케이션에 매우 적합
- 1년 이상 지속되는 워크로드에 권장 X / 예약 인스턴스를 사용하는게 비용 절감에 더 효과적 

### **Amazon EC2 Savings Plans**

- 기간 약정을 통해 비용 절감
- 약정을 초과한 사용량에 대해서는 일반 온디맨드 요금 부과
- 온디맨드 비용에 비해 최대 72%까지 비용 절감 

### **예약 인스턴스**

- 계정에서 온디맨드 인스턴스를 사용할 때 적용되는 결제 할인 옵션

- 표준은 1년, 3년

- 다음 중 하나를 수행할 때까지는 온디맨드 요금 부과
  - 인스턴스종료

  - 인스턴스 속성과 일치하는 새 예약 인스턴스 구입 

### **스팟 인스턴스**

- 시작 및 종료시간이 자유롭거나 중단을 견딜 수 있는 워크로드에 적합
- EC2 Savings Plans와 달리 약정이 필요하지 않음!
- 미사용 Amazon EC2 컴퓨팅 용량을 사용하며, 온디맨드 요금의 최대 90%까지 비용 절감

### **전용 호스트**

- 사용자 전용의 Amazon EC2 인스턴스 용량을 갖춘 물리적 서버
- 모든 EC2 옵션 중에서 가장 비용이 많이 들어감.



## 4. Amazon EC2 확장

### 확장성

- 필요한 리소스만으로 시작하고 확장 및 축소를 통해 수요 변화에 자동으로 대응하도록 아키텍처 설계
- 그 결과, 사용한 리소스에 대해서만 비용 지불 -> 용량 부족으로 고객 요구사항에 대한 걱정 X

### **Amazon EC2 Auto Scaling**

- 커피숍에서 갑자기 바리스타 한명이 수십명의 고객의 주문을 다 받아야 한다면 -> Auto Scaling
- 변화하는 애플리케이션 수요에 따라 EC2 인스턴스를 자동으로 추가하거나 제거할 수 있음.
- 필요에 따라 인스턴스를 자동으로 조정하여 애플리케이션 가용성을 효과적으로 유지.
- 동적 조정 = 수요 변화에 대응
- 예측 조정 = 예측된 수요에 따라 적절한 수의 EC2 인스턴스를 자동으로 예약
- 최소용량(Auto Scaling 그룹을 생성한 직후 시작되는 EC2 인스턴스의 수) /희망 용량 / 최대용량 설정 가능.

 

## 5. Elastic Load Balancing

- 들어오는 애플리케이션 트래픽을 EC2 인스턴스와 같은 여러 리소스에 자동으로 분산하는 서비스
- 워크로드를 여러 인스턴스에 분산하므로 어느 한 인스턴스가 대량으로 워크로드 처리 필요 X
- Elastic Load Balancing과 Auto Scaling은 별도의 서비스이지만 서로 연동



1. Elastic Load Balancing
2. 로드밸런싱의 획일적인 작업 부담을 처리할 목적으로 제작됨. = 주요 관리형 서비스
3. 같은 프로그램을 실행하여 같은 목적을 수행하는 EC2 인스턴스가 여러 개 있을 때 요청이 들어오면 이 요청이 어떤 EC2 인스턴스로 가야 하는지에 있어서 로드 밸런싱이 필요함.
4. 요청을 받은 다음 처리할 인스턴스로 라우팅하는 애플리케이션
5. AWS에는 다양한 로드 밸런서 제품이 있고, 마음에 드는것을 이용하면됨.
6. 개별 EC2 인스턴스가 아닌 리전 수준에서 실행되므로 사용자가 추가로 작업하지 않아도 자동으로 고가용 서비스가 된다.



## 6. 메시징 및 대기열

### **Amazon Simple Notification Service (Amazon SNS)**

- 게시/구독 서비스

### **Amazon Simple Queue Service (Amazon SQS)**

- 메시지 대기열 서비스
- 메시지 손실이나 다른 서비스 사용 없이 소프트웨어 구성 요소 간에 메시지를 전송, 저장, 수신 가능.

 

## 7. 추가 컴퓨팅 서비스

 

### **서버리스**

- 애플리케이션을 호스팅하는 기본 인프라나 인스턴스를 보거나 이용할 수 없다는 뜻
- 대신 프로비저닝, 규모 조정, 고가용성 및 유지 관리와 관련한 기본 환경 관리를 대신 처리해줌.
- 관리하기 편리한 컴퓨팅 서비스, 유연성
- 서버리스 컴퓨팅용 AWS 서비스 = AWS Lambda

**서버리스 컴퓨팅**

1. 인스턴스(가상 서버)를 프로비저닝
2. 사용자 코드를 업로드
3. 애플리케이션이 실행되는 동안 계속해서 인스턴스 관리



### **AWS Lambda**

- 서버를 프로비저닝하거나 관리할 필요 없이 코드를 실행할 수 있는 서비스
- 사용한 컴퓨팅 시간에 대해서만 비용 지불
- 코드를 실행하는 동안에만 요금 부과
- Lambda는 트리거된 경우에만 코드를 실행

### **컨테이너**

- 애플리케이션과 관련 종속성 및 실행해야하는 모든 구성을 모아 놓은 코드 패키지
- EC2 인스턴스에서 실행되며, 가상 머신 작동 방식과 비슷하게 서로 격리되어 실행됨.
  (이 경우 호스트는 EC2 인스턴스) 

### **컨테이너 오케스트레이션**

- 컨테이너 관리를 지원할 목적으로 제작
- 컨테이너화된 애플리케이션을 대규로모 실행하는 데 도움이 되도록 설계
- Amazon Elastic Container Service
  Amazon Elastic Kubernetes Service

### **Amazon ECS**

- Amazon Elastic Container Service
- 컨테이너식 애플리케이션을 실행하고 확장할 수 있는 확장성이 뛰어난 고성능 컨테이너 관리 시스템
- Docker 컨테이너를 지원

### **Amazon EKS**

- Amazon Elastic Kubernetes Service
- AWS에서 Kubernetes를 실행하는 데 사용할 수 있는 완전 관리형 서비스 

### **AWS Fargate**

- 컨테이너용 서버리스 컴퓨팅 엔진
- Amazon ECS / EKS 에서 작동함.
- Fargate를 사용하는 경우 서버를 프로비저닝하거나 관리할 필요 X
- 자동으로 서버 인프라 관리.
